{"ast":null,"code":"import _slicedToArray from\"C:/repositories/ReactProjectForFoocoding/ecommerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./checkout.css';import{useState,useEffect}from'react';import{GetShoppingAmountOf}from'../shoppingCart';import CheckOutProduct from'./CheckOutProduct';import Paypal from'./paypal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Checkout(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),paypalReady=_useState4[0],setPaypalReady=_useState4[1];useEffect(function(){fetch('http://localhost:3000/products').then(function(response){return response.json();}).then(function(data){setProducts(data);setPaypalReady(true);}).catch(function(err){console.log(err.message);});},[setProducts]);var totalPrice=0;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{id:\"shopTitle\",children:\"Checkout\"}),/*#__PURE__*/_jsx(\"div\",{className:\"product-list\",children:Array.isArray(products.products)?products.products.map(function(product,index){var amount=GetShoppingAmountOf(product.id);if(amount>0){totalPrice=totalPrice+product.price*amount;return/*#__PURE__*/_jsx(CheckOutProduct,{productid:product.id,image:product.image,title:product.title,price:product.price,amount:amount});}}):\"Error connecting API: \"+typeof products+\" --- \"+JSON.stringify(products)}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkoutTotal\",children:[\"VAT(included): \",Math.round(totalPrice*0.25),\" SEK\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkoutTotal\",children:[\"Total Price: \",totalPrice,\" SEK\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"checkoutPaypal\",children:paypalReady?/*#__PURE__*/_jsx(Paypal,{products:products.products}):\"\"})]});}export default Checkout;","map":{"version":3,"names":["useState","useEffect","GetShoppingAmountOf","CheckOutProduct","Paypal","Checkout","products","setProducts","paypalReady","setPaypalReady","fetch","then","response","json","data","catch","err","console","log","message","totalPrice","Array","isArray","map","product","index","amount","id","price","image","title","JSON","stringify","Math","round"],"sources":["C:/repositories/ReactProjectForFoocoding/ecommerce/src/pages/checkout.js"],"sourcesContent":["import './checkout.css';\r\nimport { useState, useEffect } from 'react';\r\nimport {GetShoppingAmountOf} from '../shoppingCart';\r\nimport CheckOutProduct from './CheckOutProduct';\r\nimport Paypal from './paypal';\r\n\r\nfunction Checkout () {\r\n    const [products, setProducts] = useState([]);\r\n    const [paypalReady, setPaypalReady] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetch('http://localhost:3000/products')\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setProducts(data);\r\n                setPaypalReady(true);\r\n            })\r\n            .catch((err) => {\r\n                console.log(err.message);\r\n            });\r\n    }, [setProducts]);\r\n\r\n    var totalPrice = 0;\r\n\r\n    return <div>\r\n        <h2 id=\"shopTitle\">Checkout</h2>\r\n        <div className=\"product-list\">\r\n            { \r\n            Array.isArray(products.products)?\r\n                products.products.map((product, index) => {\r\n                    var amount = GetShoppingAmountOf(product.id);\r\n                    if (amount > 0 ){\r\n                        totalPrice = totalPrice + product.price*amount;\r\n                        return (\r\n                            <CheckOutProduct productid={product.id} image={product.image} title={product.title} price={product.price} amount={amount}/>\r\n                        );\r\n                    }\r\n\r\n            }) : \"Error connecting API: \" + typeof products + \" --- \" + JSON.stringify(products)}\r\n        </div>\r\n        <div className=\"checkoutTotal\">VAT(included): {Math.round(totalPrice*0.25)} SEK</div>\r\n        <div className=\"checkoutTotal\">Total Price: {totalPrice} SEK</div>\r\n        <div className=\"checkoutPaypal\">\r\n            {paypalReady?<Paypal products={products.products} />:\"\"}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Checkout;"],"mappings":"wIAAA,MAAO,gBAAP,CACA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAAQC,mBAAR,KAAkC,iBAAlC,CACA,MAAOC,gBAAP,KAA4B,mBAA5B,CACA,MAAOC,OAAP,KAAmB,UAAnB,C,wFAEA,QAASC,SAAT,EAAqB,CACjB,cAAgCL,QAAQ,CAAC,EAAD,CAAxC,wCAAOM,QAAP,eAAiBC,WAAjB,eACA,eAAsCP,QAAQ,CAAC,KAAD,CAA9C,yCAAOQ,WAAP,eAAoBC,cAApB,eAEAR,SAAS,CAAC,UAAM,CACZS,KAAK,CAAC,gCAAD,CAAL,CACKC,IADL,CACU,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAT,EAAJ,EADlB,EAEKF,IAFL,CAEU,SAAAG,IAAI,CAAI,CACVP,WAAW,CAACO,IAAD,CAAX,CACAL,cAAc,CAAC,IAAD,CAAd,CACH,CALL,EAMKM,KANL,CAMW,SAACC,GAAD,CAAS,CACZC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB,EACH,CARL,EASH,CAVQ,CAUN,CAACZ,WAAD,CAVM,CAAT,CAYA,GAAIa,WAAU,CAAG,CAAjB,CAEA,mBAAO,oCACH,WAAI,EAAE,CAAC,WAAP,sBADG,cAEH,YAAK,SAAS,CAAC,cAAf,UAEIC,KAAK,CAACC,OAAN,CAAchB,QAAQ,CAACA,QAAvB,EACIA,QAAQ,CAACA,QAAT,CAAkBiB,GAAlB,CAAsB,SAACC,OAAD,CAAUC,KAAV,CAAoB,CACtC,GAAIC,OAAM,CAAGxB,mBAAmB,CAACsB,OAAO,CAACG,EAAT,CAAhC,CACA,GAAID,MAAM,CAAG,CAAb,CAAgB,CACZN,UAAU,CAAGA,UAAU,CAAGI,OAAO,CAACI,KAAR,CAAcF,MAAxC,CACA,mBACI,KAAC,eAAD,EAAiB,SAAS,CAAEF,OAAO,CAACG,EAApC,CAAwC,KAAK,CAAEH,OAAO,CAACK,KAAvD,CAA8D,KAAK,CAAEL,OAAO,CAACM,KAA7E,CAAoF,KAAK,CAAEN,OAAO,CAACI,KAAnG,CAA0G,MAAM,CAAEF,MAAlH,EADJ,CAGH,CAER,CATG,CADJ,CAUK,yBAA2B,MAAOpB,SAAlC,CAA6C,OAA7C,CAAuDyB,IAAI,CAACC,SAAL,CAAe1B,QAAf,CAZhE,EAFG,cAgBH,aAAK,SAAS,CAAC,eAAf,6BAA+C2B,IAAI,CAACC,KAAL,CAAWd,UAAU,CAAC,IAAtB,CAA/C,UAhBG,cAiBH,aAAK,SAAS,CAAC,eAAf,2BAA6CA,UAA7C,UAjBG,cAkBH,YAAK,SAAS,CAAC,gBAAf,UACKZ,WAAW,cAAC,KAAC,MAAD,EAAQ,QAAQ,CAAEF,QAAQ,CAACA,QAA3B,EAAD,CAAyC,EADzD,EAlBG,GAAP,CAsBH,CAED,cAAeD,SAAf"},"metadata":{},"sourceType":"module"}