{"ast":null,"code":"import _regeneratorRuntime from\"C:/repositories/ReactProjectForFoocoding/ecommerce/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/repositories/ReactProjectForFoocoding/ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useRef,useEffect}from\"react\";import{GetShoppingAmountOf}from'../shoppingCart';import{jsx as _jsx}from\"react/jsx-runtime\";export default function Paypal(props){var paypal=useRef();var products_paypal=[];if(Array.isArray(props.products)){props.products.map(function(product,index){var amount=GetShoppingAmountOf(product.id);if(amount>0){products_paypal.push({description:product.title+\" x \"+amount,amount:{currency_code:\"SEK\",value:product.price*amount}});};});};console.log(products_paypal);useEffect(function(){if(products_paypal.length<1)return;window.paypal.Buttons({createOrder:function createOrder(data,actions,err){return actions.order.create({intent:\"CAPTURE\",purchase_units:products_paypal});},onApprove:function(){var _onApprove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data,actions){var order;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return actions.order.capture();case 2:order=_context.sent;console.log(order);case 4:case\"end\":return _context.stop();}}},_callee);}));function onApprove(_x,_x2){return _onApprove.apply(this,arguments);}return onApprove;}(),onError:function onError(err){console.log(err);}}).render(paypal.current);console.log(products_paypal);},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{ref:paypal})});}","map":{"version":3,"names":["React","useRef","useEffect","GetShoppingAmountOf","Paypal","props","paypal","products_paypal","Array","isArray","products","map","product","index","amount","id","push","description","title","currency_code","value","price","console","log","length","window","Buttons","createOrder","data","actions","err","order","create","intent","purchase_units","onApprove","capture","onError","render","current"],"sources":["C:/repositories/ReactProjectForFoocoding/ecommerce/src/pages/paypal.js"],"sourcesContent":["import React, { useRef, useEffect } from \"react\";\r\nimport {GetShoppingAmountOf} from '../shoppingCart';\r\n\r\nexport default function Paypal(props) {\r\n    const paypal = useRef();\r\n\r\n    var products_paypal = [];\r\n\r\n    if(Array.isArray(props.products)){\r\n        props.products.map((product, index) => {\r\n            var amount = GetShoppingAmountOf(product.id);\r\n            if (amount > 0 ){\r\n                products_paypal.push(\r\n                    {\r\n                        description: product.title + \" x \" + amount,\r\n                        amount: {\r\n                            currency_code: \"SEK\",\r\n                            value: (product.price * amount),\r\n                        },\r\n                    }\r\n                );\r\n            };\r\n        });\r\n    };\r\n\r\n    console.log(products_paypal);\r\n\r\n    useEffect(() => {\r\n        if (products_paypal.length<1)\r\n            return;\r\n        window.paypal\r\n        .Buttons({\r\n            createOrder: (data, actions, err) => {\r\n                return actions.order.create({\r\n                    intent: \"CAPTURE\",\r\n                    purchase_units: products_paypal,\r\n                });\r\n            },\r\n                onApprove: async (data, actions) => {\r\n                const order = await actions.order.capture();\r\n                console.log(order);\r\n            },\r\n                onError: (err) => {\r\n                console.log(err);\r\n            },\r\n        })\r\n        .render(paypal.current);\r\n        console.log(products_paypal);\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <div ref={paypal}></div>\r\n        </div>\r\n    );\r\n}"],"mappings":"gSAAA,MAAOA,MAAP,EAAgBC,MAAhB,CAAwBC,SAAxB,KAAyC,OAAzC,CACA,OAAQC,mBAAR,KAAkC,iBAAlC,C,2CAEA,cAAe,SAASC,OAAT,CAAgBC,KAAhB,CAAuB,CAClC,GAAMC,OAAM,CAAGL,MAAM,EAArB,CAEA,GAAIM,gBAAe,CAAG,EAAtB,CAEA,GAAGC,KAAK,CAACC,OAAN,CAAcJ,KAAK,CAACK,QAApB,CAAH,CAAiC,CAC7BL,KAAK,CAACK,QAAN,CAAeC,GAAf,CAAmB,SAACC,OAAD,CAAUC,KAAV,CAAoB,CACnC,GAAIC,OAAM,CAAGX,mBAAmB,CAACS,OAAO,CAACG,EAAT,CAAhC,CACA,GAAID,MAAM,CAAG,CAAb,CAAgB,CACZP,eAAe,CAACS,IAAhB,CACI,CACIC,WAAW,CAAEL,OAAO,CAACM,KAAR,CAAgB,KAAhB,CAAwBJ,MADzC,CAEIA,MAAM,CAAE,CACJK,aAAa,CAAE,KADX,CAEJC,KAAK,CAAGR,OAAO,CAACS,KAAR,CAAgBP,MAFpB,CAFZ,CADJ,EASH,EACJ,CAbD,EAcH,EAEDQ,OAAO,CAACC,GAAR,CAAYhB,eAAZ,EAEAL,SAAS,CAAC,UAAM,CACZ,GAAIK,eAAe,CAACiB,MAAhB,CAAuB,CAA3B,CACI,OACJC,MAAM,CAACnB,MAAP,CACCoB,OADD,CACS,CACLC,WAAW,CAAE,qBAACC,IAAD,CAAOC,OAAP,CAAgBC,GAAhB,CAAwB,CACjC,MAAOD,QAAO,CAACE,KAAR,CAAcC,MAAd,CAAqB,CACxBC,MAAM,CAAE,SADgB,CAExBC,cAAc,CAAE3B,eAFQ,CAArB,CAAP,CAIH,CANI,CAOD4B,SAAS,qFAAE,iBAAOP,IAAP,CAAaC,OAAb,oJACSA,QAAO,CAACE,KAAR,CAAcK,OAAd,EADT,QACLL,KADK,eAEXT,OAAO,CAACC,GAAR,CAAYQ,KAAZ,EAFW,sDAAF,2FAPR,CAWDM,OAAO,CAAE,iBAACP,GAAD,CAAS,CAClBR,OAAO,CAACC,GAAR,CAAYO,GAAZ,EACH,CAbI,CADT,EAgBCQ,MAhBD,CAgBQhC,MAAM,CAACiC,OAhBf,EAiBAjB,OAAO,CAACC,GAAR,CAAYhB,eAAZ,EACH,CArBQ,CAqBN,EArBM,CAAT,CAuBA,mBACI,kCACI,YAAK,GAAG,CAAED,MAAV,EADJ,EADJ,CAKH"},"metadata":{},"sourceType":"module"}